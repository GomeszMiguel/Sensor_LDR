<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="pt-BR">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Servidor/ClienteUDP_Sensor_LDR: Refência do Namespace implementacaoGraf</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="ime.png"/></td>
  <td id="projectalign">
   <div id="projectname">Servidor/ClienteUDP_Sensor_LDR
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Gerado por Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Busca',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('namespaceimplementacao_graf.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Carregando...</div>
<div class="SRStatus" id="Searching">Procurando...</div>
<div class="SRStatus" id="NoMatches">Nenhuma entrada encontrado</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">Refência do Namespace implementacaoGraf</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-nested-classes" class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Componentes</h2></td></tr>
<tr class="memitem:App" id="r_App"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classimplementacao_graf_1_1_app.html">App</a></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Funções</h2></td></tr>
<tr class="memitem:ae5b81368694a8b40d4515616d022484e" id="r_ae5b81368694a8b40d4515616d022484e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae5b81368694a8b40d4515616d022484e">iniciar_servidor_udp</a> ()</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-var-members" class="groupheader"><a id="var-members" name="var-members"></a>
Variáveis</h2></td></tr>
<tr class="memitem:a13211502f629204ac54e51c5eb42d466" id="r_a13211502f629204ac54e51c5eb42d466"><td class="memItemLeft" align="right" valign="top">str&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a13211502f629204ac54e51c5eb42d466">UDP_IP</a> = &quot;192.168.42.10&quot;</td></tr>
<tr class="memitem:ab3409d579a915deff9e68d4a1dff4fe1" id="r_ab3409d579a915deff9e68d4a1dff4fe1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab3409d579a915deff9e68d4a1dff4fe1">UDP_PORT</a> = 8080</td></tr>
<tr class="memitem:aa6ca9918a676e0aee8dac59dc1dc5ba0" id="r_aa6ca9918a676e0aee8dac59dc1dc5ba0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa6ca9918a676e0aee8dac59dc1dc5ba0">HISTORICO_MAX_PONTOS</a> = 60</td></tr>
<tr class="memitem:a2da445dd284a6d15ed869953bd73719c" id="r_a2da445dd284a6d15ed869953bd73719c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2da445dd284a6d15ed869953bd73719c">dados_fila</a> = queue.Queue()</td></tr>
<tr class="memdesc:a2da445dd284a6d15ed869953bd73719c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fila thread-safe para armazenar os dicionários/objetos JSON recebidos.  <br /></td></tr>
<tr class="memitem:aa9c6b44cf70a94eeeaa0d124963130b8" id="r_aa9c6b44cf70a94eeeaa0d124963130b8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa9c6b44cf70a94eeeaa0d124963130b8">dados_grafico</a> = deque(maxlen=<a class="el" href="#aa6ca9918a676e0aee8dac59dc1dc5ba0">HISTORICO_MAX_PONTOS</a>)</td></tr>
<tr class="memdesc:aa9c6b44cf70a94eeeaa0d124963130b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deque para armazenar o histórico de valores para plotagem, com tamanho máximo.  <br /></td></tr>
<tr class="memitem:aa805ac799d1505ad9e65f508ba4bc01a" id="r_aa805ac799d1505ad9e65f508ba4bc01a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa805ac799d1505ad9e65f508ba4bc01a">servidor_thread</a> = threading.Thread(target=<a class="el" href="#ae5b81368694a8b40d4515616d022484e">iniciar_servidor_udp</a>, daemon=True)</td></tr>
<tr class="memitem:afced63893508f7a91a6cb3cce4685dca" id="r_afced63893508f7a91a6cb3cce4685dca"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afced63893508f7a91a6cb3cce4685dca">app</a> = <a class="el" href="classimplementacao_graf_1_1_app.html">App</a>()</td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Descrição detalhada</h2>
<div class="textblock"><pre class="fragment">@file implementacaoGraf.py
@brief Aplicação GUI de Monitoramento em Tempo Real para Sensor LDR via UDP.

Este script Python implementa um monitor gráfico em tempo real para dados
de luminosidade (em porcentagem) recebidos através de pacotes UDP.
Ele usa Tkinter para a interface gráfica e Matplotlib para o gráfico de histórico.
A principal característica é a função iniciar_servidor_udp, que recebe uma
string numérica via UDP e a transforma em um objeto JSON enriquecido
para processamento na GUI.

@author Gabriel Belizario
@date 09 Novembro de 2025
</pre> </div><a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Funções</h2>
<a id="ae5b81368694a8b40d4515616d022484e" name="ae5b81368694a8b40d4515616d022484e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5b81368694a8b40d4515616d022484e">&#9670;&#160;</a></span>iniciar_servidor_udp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">implementacaoGraf.iniciar_servidor_udp </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">@brief Inicia um servidor UDP em um thread separado para receber dados.

Escuta por pacotes UDP contendo uma string numérica. Converte a string
para um número inteiro e a *enriquece* com metadados (ID e unidade)
em um formato de dicionário Python (JSON). O dicionário enriquecido
é então colocado na fila de dados para ser processado pela thread principal (GUI).
O ID do sensor é fixo como "LDR_KY-018" e a unidade como "%".

@note Assume-se que os pacotes UDP contêm apenas a representação string de um inteiro.
@return Não retorna. Executa em loop infinito.
</pre> <div class="fragment"><div class="line"><span class="lineno">   50</span><span class="keyword">def </span>iniciar_servidor_udp():</div>
<div class="line"><span class="lineno">   51</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   52</span><span class="stringliteral">    @brief Inicia um servidor UDP em um thread separado para receber dados.</span></div>
<div class="line"><span class="lineno">   53</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   54</span><span class="stringliteral">    Escuta por pacotes UDP contendo uma string numérica. Converte a string</span></div>
<div class="line"><span class="lineno">   55</span><span class="stringliteral">    para um número inteiro e a *enriquece* com metadados (ID e unidade)</span></div>
<div class="line"><span class="lineno">   56</span><span class="stringliteral">    em um formato de dicionário Python (JSON). O dicionário enriquecido</span></div>
<div class="line"><span class="lineno">   57</span><span class="stringliteral">    é então colocado na fila de dados para ser processado pela thread principal (GUI).</span></div>
<div class="line"><span class="lineno">   58</span><span class="stringliteral">    O ID do sensor é fixo como &quot;LDR_KY-018&quot; e a unidade como &quot;%&quot;.</span></div>
<div class="line"><span class="lineno">   59</span><span class="stringliteral">    </span></div>
<div class="line"><span class="lineno">   60</span><span class="stringliteral">    @note Assume-se que os pacotes UDP contêm apenas a representação string de um inteiro.</span></div>
<div class="line"><span class="lineno">   61</span><span class="stringliteral">    @return Não retorna. Executa em loop infinito.</span></div>
<div class="line"><span class="lineno">   62</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   63</span>    sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)</div>
<div class="line"><span class="lineno">   64</span>    sock.bind((UDP_IP, UDP_PORT))</div>
<div class="line"><span class="lineno">   65</span>    print(f<span class="stringliteral">&quot;Servidor UDP (modo string) escutando em {UDP_IP}:{UDP_PORT}...&quot;</span>)</div>
<div class="line"><span class="lineno">   66</span> </div>
<div class="line"><span class="lineno">   67</span>    <span class="keywordflow">while</span> <span class="keyword">True</span>:</div>
<div class="line"><span class="lineno">   68</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">   69</span>            <span class="comment"># 1. Recebe o datagrama (bytes)</span></div>
<div class="line"><span class="lineno">   70</span>            data, addr = sock.recvfrom(1024) </div>
<div class="line"><span class="lineno">   71</span>            </div>
<div class="line"><span class="lineno">   72</span>            <span class="comment"># 2. Converte bytes para string e remove espaços em branco (ex: &quot;75&quot;)</span></div>
<div class="line"><span class="lineno">   73</span>            mensagem_string = data.decode(<span class="stringliteral">&#39;utf-8&#39;</span>).strip()</div>
<div class="line"><span class="lineno">   74</span>            </div>
<div class="line"><span class="lineno">   75</span>            <span class="comment"># 3. Converte a string (ex: &quot;75&quot;) para um número inteiro</span></div>
<div class="line"><span class="lineno">   76</span>            valor_percentual = int(mensagem_string)</div>
<div class="line"><span class="lineno">   77</span>            </div>
<div class="line"><span class="lineno">   78</span>            <span class="comment"># 4. TRANSFORMAÇÃO PARA JSON (Dicionário Python)</span></div>
<div class="line"><span class="lineno">   79</span>            dados_json_enriquecidos = {</div>
<div class="line"><span class="lineno">   80</span>                <span class="stringliteral">&quot;id&quot;</span>: <span class="stringliteral">&quot;LDR_KY-018&quot;</span>,        <span class="comment"># Adiciona o ID do grupo</span></div>
<div class="line"><span class="lineno">   81</span>                <span class="stringliteral">&quot;valor&quot;</span>: valor_percentual,</div>
<div class="line"><span class="lineno">   82</span>                <span class="stringliteral">&quot;unidade&quot;</span>: <span class="stringliteral">&quot;%&quot;</span>             <span class="comment"># Adiciona a unidade</span></div>
<div class="line"><span class="lineno">   83</span>            }</div>
<div class="line"><span class="lineno">   84</span>            </div>
<div class="line"><span class="lineno">   85</span>            <span class="comment"># 5. Coloca o objeto JSON (dicionário) na fila</span></div>
<div class="line"><span class="lineno">   86</span>            dados_fila.put(dados_json_enriquecidos)</div>
<div class="line"><span class="lineno">   87</span>            </div>
<div class="line"><span class="lineno">   88</span>        <span class="keywordflow">except</span> (ValueError, UnicodeDecodeError):</div>
<div class="line"><span class="lineno">   89</span>            <span class="comment"># Erro se a mensagem não for um número (ex: &quot;ola&quot;)</span></div>
<div class="line"><span class="lineno">   90</span>            print(f<span class="stringliteral">&quot;Erro: Pacote recebido não é um número válido: {data}&quot;</span>)</div>
<div class="line"><span class="lineno">   91</span>        <span class="keywordflow">except</span> Exception <span class="keyword">as</span> e:</div>
<div class="line"><span class="lineno">   92</span>            print(f<span class="stringliteral">&quot;Erro no servidor UDP: {e}&quot;</span>)</div>
<div class="line"><span class="lineno">   93</span> </div>
</div><!-- fragment -->
</div>
</div>
<a name="doc-var-members" id="doc-var-members"></a><h2 id="header-doc-var-members" class="groupheader">Variáveis</h2>
<a id="afced63893508f7a91a6cb3cce4685dca" name="afced63893508f7a91a6cb3cce4685dca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afced63893508f7a91a6cb3cce4685dca">&#9670;&#160;</a></span>app</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">implementacaoGraf.app = <a class="el" href="classimplementacao_graf_1_1_app.html">App</a>()</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a2da445dd284a6d15ed869953bd73719c" name="a2da445dd284a6d15ed869953bd73719c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2da445dd284a6d15ed869953bd73719c">&#9670;&#160;</a></span>dados_fila</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">implementacaoGraf.dados_fila = queue.Queue()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fila thread-safe para armazenar os dicionários/objetos JSON recebidos. </p>

</div>
</div>
<a id="aa9c6b44cf70a94eeeaa0d124963130b8" name="aa9c6b44cf70a94eeeaa0d124963130b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9c6b44cf70a94eeeaa0d124963130b8">&#9670;&#160;</a></span>dados_grafico</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">implementacaoGraf.dados_grafico = deque(maxlen=<a class="el" href="#aa6ca9918a676e0aee8dac59dc1dc5ba0">HISTORICO_MAX_PONTOS</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deque para armazenar o histórico de valores para plotagem, com tamanho máximo. </p>

</div>
</div>
<a id="aa6ca9918a676e0aee8dac59dc1dc5ba0" name="aa6ca9918a676e0aee8dac59dc1dc5ba0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6ca9918a676e0aee8dac59dc1dc5ba0">&#9670;&#160;</a></span>HISTORICO_MAX_PONTOS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int implementacaoGraf.HISTORICO_MAX_PONTOS = 60</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aa805ac799d1505ad9e65f508ba4bc01a" name="aa805ac799d1505ad9e65f508ba4bc01a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa805ac799d1505ad9e65f508ba4bc01a">&#9670;&#160;</a></span>servidor_thread</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">implementacaoGraf.servidor_thread = threading.Thread(target=<a class="el" href="#ae5b81368694a8b40d4515616d022484e">iniciar_servidor_udp</a>, daemon=True)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a13211502f629204ac54e51c5eb42d466" name="a13211502f629204ac54e51c5eb42d466"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13211502f629204ac54e51c5eb42d466">&#9670;&#160;</a></span>UDP_IP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">str implementacaoGraf.UDP_IP = &quot;192.168.42.10&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ab3409d579a915deff9e68d4a1dff4fe1" name="ab3409d579a915deff9e68d4a1dff4fe1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3409d579a915deff9e68d4a1dff4fe1">&#9670;&#160;</a></span>UDP_PORT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int implementacaoGraf.UDP_PORT = 8080</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="namespaceimplementacao_graf.html">implementacaoGraf</a></li>
    <li class="footer">Gerado por <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
